<!DOCTYPE html>
<html lang="En">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸŒ‘- Flower</title>
    <style>
        :root {
            --rose-grow-duration: 1s;
            --rose-bloom-duration: 0.4s; 
            --petal-bloom-delay: 0.1s;
            --rose-sway-duration: 7s;
            --petal-breath-duration: 3s;
            --text-animation-duration: 1.5s;
            --text-suspense-duration: 0.4s;
            --shooting-star-duration: 4s;
            --green-dark: #2d6a4f;
            --green-mid: #40916c;
            --green-light: #52b788;
            --petal-glow-color: rgba(255, 230, 240, 0.7);
            --stem-glow-color: rgba(122, 255, 168, 0.5);
        }
    
        body {
            margin: 0;
            overflow: hidden;
            background-color: #0a0a10;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: serif, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            color: #eee;
            position: relative;
            perspective: 1000px;
        }
    
        #sky {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at bottom, #1a1a2e 0%, #0a0a15 80%);
            opacity: 0;
            transition: opacity 2s ease-in-out;
            z-index: -2;
            overflow: hidden;
        }
    
        #sky.visible {
            opacity: 1;
        }
    
        .star {
            position: absolute;
            background-color: white;
            border-radius: 50%;
            opacity: 0.3;
            animation: twinkle 2.5s infinite ease-in-out;
        }
    
        @keyframes twinkle {
            0%,
            100% {
                opacity: 0.3;
                transform: scale(0.8);
            }
    
            50% {
                opacity: 1;
                transform: scale(1.1);
            }
        }
    
        .shooting-star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: radial-gradient(circle, white 20%, rgba(255, 255, 255, 0.5) 100%);
            border-radius: 50%;
            box-shadow: 0 0 8px 2px white;
            animation: shoot var(--shooting-star-duration) linear infinite;
            top: -50px;
            left: -50px;
            opacity: 0;
            z-index: 10;
        }
    
        .shooting-star::before {
            content: '';
            position: absolute;
            width: 60px;
            height: 1px;
            background: linear-gradient(to left, rgba(255, 255, 255, 0.7), transparent);
            transform-origin: right center;
            transform: translateY(-50%) rotate(var(--angle, 30deg)) translateX(50%);
            top: 50%;
            right: 1px;
        }
    
        @keyframes shoot {
            0% {
                transform: translate(20vw, 10vh) rotate(30deg);
                opacity: 0;
            }
    
            10% {
                opacity: 1;
            }
    
            90% {
                opacity: 1;
            }
    
            100% {
                transform: translate(80vw, 70vh) rotate(30deg);
                opacity: 0;
            }
        }
    
        #text-container {
            position: absolute;
            text-align: center;
            top: 15vh;
            left: 50%;
            transform: translateX(-50%) translateY(-30px);
            opacity: 0;
            transition: opacity 1s ease-out, transform 1s ease-out;
            width: 80%;
            max-width: 600px;
            z-index: 2;
            min-height: 2.5em;
        }
    
        #text-container.visible {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        #text-container.hide {
            opacity: 0;
            transform: translateX(-50%) translateY(-50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
    
        #text-wrapper {
            display: inline-block;
        }
    
        #text {
            display: inline-block;
            font-size: clamp(1.3em, 4vw, 1.9em);
            font-weight: normal;
            color: #f0f0f0;
            text-shadow: 0 0 6px rgba(255, 255, 255, 0.6);
        }
    
        .typing-effect {
            overflow: hidden;
            white-space: nowrap;
            border-right: .1em solid #eee;
            animation: typing var(--text-animation-duration) steps(30, end) forwards, blink-caret .75s step-end infinite;
        }
    
        .typing-suspense {
            overflow: hidden;
            white-space: nowrap;
            border-right: .1em solid #eee;
            animation: typing var(--text-suspense-duration) steps(3, end) forwards, blink-caret .5s step-end infinite;
        }
    
        @keyframes typing {
            from {
                width: 0
            }
    
            to {
                width: 100%
            }
        }
    
        @keyframes blink-caret {
    
            from,
            to {
                border-color: transparent
            }
    
            50% {
                border-color: #eee;
            }
        }
    
        .fade-in-effect {
            opacity: 0;
            animation: fadeIn 1s ease-in forwards;
        }
    
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
    
            to {
                opacity: 1;
            }
        }
    
        #rose-container {
            position: fixed; 
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            cursor: pointer;
            width: clamp(130px, 28vw, 220px);
            height: 100vh; 
            z-index: 1;
            opacity: 0;
            animation: none var(--rose-sway-duration) ease-in-out infinite alternate;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
    
        #rose-container.preparing {
            opacity: 1;
        }
    
        #rose-container.ready {
            animation-name: sway;
        }
        
        #rose-container.hide {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
    
        @keyframes sway {
            from {
                transform: translateX(-50%) rotate(-1deg);
            }
    
            to {
                transform: translateX(-50%) rotate(1deg);
            }
        }
    
        #rose-svg {
            width: 100%;
            height: 100%;
            display: block;
            overflow: visible;
        }
    
        #rose-svg .stem-path {
            stroke: url(#stemGradient); 
            stroke-width: 6;
            stroke-linecap: round;
            fill: none;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            transition: stroke-dashoffset var(--rose-grow-duration) cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 0 3px var(--stem-glow-color)); 
        }
    
        #rose-container.growing #rose-svg .stem-path {
            stroke-dashoffset: 0;
        }
    
        #rose-svg .leaf {
            fill: url(#leafGradient);
            stroke: var(--green-dark);
            stroke-width: 0.5px;
            opacity: 0;
            transform-origin: 0% 100%; 
            transition: opacity calc(var(--rose-bloom-duration) * 0.6) ease-out, transform calc(var(--rose-bloom-duration)) cubic-bezier(0.68, -0.55, 0.27, 1.55);
            filter: drop-shadow(0 0 3px var(--stem-glow-color));
        }
    
        #rose-container.blooming #rose-svg .leaf {
            opacity: 1;
            transform: scale(1) rotate(0deg) translateX(0px) translateY(0px);
        }
    
        #rose-container.blooming #rose-svg .leaf1 {
            transition-delay: 0.1s;
            transform: scale(1.0) rotate(0deg);
        }
    
        #rose-container.blooming #rose-svg .leaf2 {
            transition-delay: 0.2s;
            transform: scale(1.0) rotate(0deg); 
        }
    
        #rose-container.blooming #rose-svg .leaf3 {
            transition-delay: 0.3s;
            transform: scale(1.0) rotate(0deg); 
        }
    
        #rose-container.blooming #rose-svg .leaf4 {
            transition-delay: 0.4s;
            transform: scale(1.0) rotate(0deg); 
        }
    
        #rose-container.blooming #rose-svg .leaf5 {
            transition-delay: 0.5s;
            transform: scale(1.0) rotate(0deg);
        }
    
        #rose-container.blooming #rose-svg .leaf6 {
            transition-delay: 0.6s;
            transform: scale(1.0) rotate(0deg);
        }
    
        #rose-svg .petal {
            fill: url(#petalFill);
            filter: url(#petalGlow) drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
            opacity: 0;
            transform-origin: 50% 90%;
            transition: opacity calc(var(--rose-bloom-duration) * 0.5) ease-out, 
                        transform calc(var(--rose-bloom-duration) * 0.8) cubic-bezier(0.68, -0.55, 0.27, 1.55);
            transform: scale(0.6) rotate(10deg) translateX(5px);
            animation: petalBreath var(--petal-breath-duration) ease-in-out infinite alternate;
            animation-play-state: paused;
        }
    
        #rose-container.blooming #rose-svg .petal {
            opacity: 1;
            transform: scale(1.05); 
            animation-play-state: running;
        }
    
        #rose-container.blooming #rose-svg .petal1 {
            transition-delay: calc(var(--petal-bloom-delay) * 1);
            animation-delay: calc(var(--petal-bloom-delay) * 1);
            transform: scale(1.1) rotate(25deg) translateX(4px);
        }
    
        #rose-container.blooming #rose-svg .petal2 {
            transition-delay: calc(var(--petal-bloom-delay) * 2);
            animation-delay: calc(var(--petal-bloom-delay) * 2);
            transform: scale(1.1) rotate(-25deg) translateX(-4px);
        }
    
        #rose-container.blooming #rose-svg .petal3 {
            transition-delay: calc(var(--petal-bloom-delay) * 3);
            animation-delay: calc(var(--petal-bloom-delay) * 3);
            transform: scale(1.1) rotate(30deg) translateX(5px);
        }
    
        #rose-container.blooming #rose-svg .petal4 {
            transition-delay: calc(var(--petal-bloom-delay) * 4);
            animation-delay: calc(var(--petal-bloom-delay) * 4);
            transform: scale(1.1) rotate(-30deg) translateX(-5px);
        }
    
        #rose-container.blooming #rose-svg .petal5 {
            transition-delay: calc(var(--petal-bloom-delay) * 5);
            animation-delay: calc(var(--petal-bloom-delay) * 5);
            transform: scale(1.1) rotate(0deg) translateX(0px);
        }
    
        #rose-container.blooming #rose-svg .petal6 {
            transition-delay: calc(var(--petal-bloom-delay) * 6);
            animation-delay: calc(var(--petal-bloom-delay) * 6);
            transform: scale(1.1) rotate(-35deg) translateX(-6px);
        }
    
        #rose-container.blooming #rose-svg .petal7 {
            transition-delay: calc(var(--petal-bloom-delay) * 7);
            animation-delay: calc(var(--petal-bloom-delay) * 7);
            transform: scale(1.1) rotate(35deg) translateX(6px);
        }
    
        @keyframes petalBreath {
            from {
                transform: scale(1.05);
            }
    
            to {
                transform: scale(1.1);
            }
        }
        
        .tall-grass {
            position: absolute;
            bottom: 0;
            width: 120%; 
            height: 50vh; 
            z-index: -1;
            opacity: 0.6; 
            transition: opacity 1.2s ease-out;
            filter: drop-shadow(0 0 3px var(--stem-glow-color)); 
            transform-origin: bottom center;
        }
        
        .tall-grass.left {
            left: -90%; 
            transform: scaleX(-1);
        }
        
        .tall-grass.right {
            right: -90%;
        }
        
        #rose-container.growing .tall-grass {
            opacity: 0.6; 
            animation: sway-grass 8s ease-in-out infinite alternate;
        }
        
        @keyframes sway-grass {
            from {
                transform: scaleX(-1) rotate(-1deg);
            }
            to {
                transform: scaleX(-1) rotate(1deg);
            }
        }
        
        .tall-grass.right {
            animation-delay: 1s;
        }
        
        .grass-blade {
            fill: none;
            stroke: url(#grassGradient);
            stroke-width: 1.5; 
            stroke-linecap: round;
            filter: drop-shadow(0 0 2px var(--stem-glow-color)); 
            opacity: 0.7; 
        }
        
        .tall-grass.hide {
            opacity: 0;
            transition: opacity 0.8s ease-out;
        }
    
        #glass-bell-container {
            position: absolute;
            bottom: 5%; 
            left: 50%;
            width: 180%;
            height: 60%;
            transform: translate(-50%, -150%) scale(0.8);
            transition: transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 1s ease-out;
            opacity: 0;
            z-index: 3;
            pointer-events: none;
        }

        #glass-bell-container.visible {
            transform: translate(-50%, 0%) scale(1);
            opacity: 1;
        }
        
        #glass-bell-container.hide {
            opacity: 0;
            transform: translate(-50%, 100%) scale(0.8);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
    
        #glass-bell-svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }
    
        .bell-glass {
            fill: url(#glassGradient);
            stroke: rgba(220, 220, 255, 0.3);
            stroke-width: 1.5px;
            filter: url(#glassShine);
        }
    
        .bell-knob {
            fill: url(#knobGradient);
            filter: url(#knobShine);
        }
    
    
        .ripple {
            position: absolute;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.6);
            transform: scale(0);
            opacity: 1;
            animation: ripple-effect 0.6s ease-out forwards;
            pointer-events: none;
            z-index: 2;
        }
    
        @keyframes ripple-effect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }
    
        #moon-reveal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            z-index: 5;
            transition: opacity 1.5s ease-in-out;
            pointer-events: none;
            background: radial-gradient(circle at center, rgba(10, 10, 20, 0.8) 0%, rgba(5, 5, 10, 1) 80%);
        }
    
        #moon-reveal.open {
            opacity: 1;
            pointer-events: auto;
        }
    
        .moon-container {
            position: relative;
            width: clamp(250px, 60vw, 400px);
            height: clamp(250px, 60vw, 400px);
            animation: floatMoon 8s ease-in-out infinite;
            opacity: 0;
            transform: scale(0.5);
            transition: opacity 1.5s ease-out 0.5s, transform 1.5s ease-out 0.5s;
        }
    
        #moon-reveal.open .moon-container {
            opacity: 1;
            transform: scale(1);
        }
    
        #moon-reveal { 
             position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;
             opacity: 0; z-index: 5; transition: opacity 1.5s ease-in-out; pointer-events: none;
             background: radial-gradient(circle at center, rgba(10, 10, 20, 0.8) 0%, rgba(5, 5, 10, 1) 80%);
         }
        #moon-reveal.open { opacity: 1; pointer-events: auto; }
        .moon-container { 
             position: relative; width: clamp(250px, 60vw, 400px); height: clamp(250px, 60vw, 400px);
             animation: floatMoon 8s ease-in-out infinite; opacity: 0; transform: scale(0.5);
             transition: opacity 1.5s ease-out 0.5s, transform 1.5s ease-out 0.5s;
         }
        
        .photo-placeholder {
            position: absolute;
            width: 30%;
            height: 30%;
            border-radius: 10px;
            opacity: 0;
            transition: opacity 0.5s ease-in 2s;
            z-index: 2;
        }
        
        .photo-left {
            top: 20%;
            left: -10%;
            transform: rotate(-15deg);
        }
        
        .photo-right {
            top: 20%;
            right: -10%;
            transform: rotate(15deg);
        }
        
        #moon-reveal.open .photo-placeholder {
            opacity: 1;
        }
        #moon-reveal.open .moon-container { opacity: 1; transform: scale(1); }
        .moon-glow { 
             position: absolute; width: 110%; height: 110%; top: -5%; left: -5%;
             background: radial-gradient(circle at center, rgba(245, 245, 240, 0.4) 0%, rgba(245, 245, 240, 0.2) 60%, transparent 80%);
             filter: blur(25px); border-radius: 50%; z-index: -1;
         }
        @keyframes floatMoon { 
             0%, 100% { transform: translateY(0) rotate(1deg) scale(1); } 50% { transform: translateY(-8px) rotate(-1deg) scale(1.02); }
         }
        .moon-svg { 
             width: 100%; height: 100%; transform-origin: center center;
         }
        #moon-image { 
             position: absolute; bottom: 15%; left: 50%; transform: translateX(-50%); width: 20%; height: auto; opacity: 0.8; pointer-events: none;
         }
    
        #wish-text { 
             position: absolute; 
             top: -35%; 
             left: 50%; 
             transform: translateX(-50%);
             font-size: clamp(1.1em, 3vw, 1.6em); 
             opacity: 0; 
             transition: opacity 1.5s ease-in-out 1.5s;
             text-align: center; 
             width: 80%; 
             max-width: 500px; 
             color: #f0f0f0;
             text-shadow: 0 0 8px rgba(255, 255, 255, 0.6);
         }
        #moon-reveal.open #wish-text { opacity: 1; }

        .dust-particle {
            position: fixed;
            width: 1px;
            height: 1px;
            border-radius: 50%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.8), rgba(255,255,255,0.2));
            opacity: 0;
            z-index: -2;
            pointer-events: none;
        }

        @keyframes rise {
            0% {
                transform: translateY(100vh);
                opacity: 0;
            }
            20% { opacity: 1; }
            80% { opacity: 0.8; }
            100% {
                transform: translateY(-20vh);
                opacity: 0;
            }
        }

        .butterfly {
            position: absolute;
            width: 40px;
            height: 40px;
            filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
            opacity: 0;
            pointer-events: none;
            z-index: -1;
        }

        .butterfly svg {
            animation: wing-flutter 0.8s infinite ease-in-out;
        }

        @keyframes wing-flutter {
            0%, 100% { transform: scaleX(1); }
            50% { transform: scaleX(0.85); }
        }

        @keyframes flyUp {
            0% {
                transform: translateY(100vh) translateX(0) scale(1);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            25% {
                transform: translateY(75vh) translateX(20px);
            }
            50% {
                transform: translateY(50vh) translateX(-20px);
            }
            75% {
                transform: translateY(25vh) translateX(20px);
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-20vh) translateX(0);
                opacity: 0;
            }
        }

        .butterfly.animated {
            animation: flyUp 8s ease-in-out forwards;
        }
    
        @media screen and (max-width: 768px) { 
             #text { font-size: clamp(1.2em, 5vw, 1.6em); }
             #rose-container { width: clamp(110px, 35vw, 180px); }
             .moon-container { width: clamp(200px, 70vw, 300px); height: clamp(200px, 70vw, 300px); }
             #wish-text { font-size: clamp(1em, 4vw, 1.4em); bottom: 8%;}
         }
        @media screen and (max-width: 480px) { 
             body { min-height: 110vh;}
             #text-container { margin-bottom: 10px; min-height: 2em; }
             #text { font-size: clamp(1.1em, 6vw, 1.4em); }
             #rose-container { width: clamp(100px, 40vw, 140px); }
             .moon-container { width: clamp(180px, 80vw, 250px); height: clamp(180px, 80vw, 250px); }
            #wish-text { font-size: clamp(0.9em, 5vw, 1.2em); bottom: 5%; width: 90%; }
         }

        body {
            font-family: serif, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        #rose-svg .stem-path {
            stroke: url(#stemGradient); 
            stroke-width: 6;
            stroke-linecap: round;
            fill: none;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            transition: stroke-dashoffset var(--rose-grow-duration) cubic-bezier(0.4, 0, 0.2, 1);
            -webkit-filter: drop-shadow(0 0 3px var(--stem-glow-color));
            filter: drop-shadow(0 0 3px var(--stem-glow-color));
            transform: translateZ(0); 
            -webkit-transform: translateZ(0);
            will-change: stroke-dashoffset; 
        }
        
        #rose-svg .leaf {
            fill: url(#leafGradient);
            stroke: var(--green-dark);
            stroke-width: 0.5px;
            opacity: 0;
            transform-origin: 0% 100%;
            -webkit-transform-origin: 0% 100%;
            transition: opacity calc(var(--rose-bloom-duration) * 0.6) ease-out, 
                        transform calc(var(--rose-bloom-duration)) cubic-bezier(0.68, -0.55, 0.27, 1.55);
            -webkit-transition: opacity calc(var(--rose-bloom-duration) * 0.6) ease-out, 
                               -webkit-transform calc(var(--rose-bloom-duration)) cubic-bezier(0.68, -0.55, 0.27, 1.55);
            -webkit-filter: drop-shadow(0 0 3px var(--stem-glow-color));
            filter: drop-shadow(0 0 3px var(--stem-glow-color));
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
            will-change: opacity, transform;
        }
        
        #rose-svg .petal {
            fill: url(#petalFill);
            -webkit-filter: url(#petalGlow) drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
            filter: url(#petalGlow) drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
            opacity: 0;
            transform-origin: 50% 90%;
            -webkit-transform-origin: 50% 90%;
            transition: opacity calc(var(--rose-bloom-duration) * 0.5) ease-out, 
                        transform calc(var(--rose-bloom-duration) * 0.8) cubic-bezier(0.68, -0.55, 0.27, 1.55);
            -webkit-transition: opacity calc(var(--rose-bloom-duration) * 0.5) ease-out, 
                               -webkit-transform calc(var(--rose-bloom-duration) * 0.8) cubic-bezier(0.68, -0.55, 0.27, 1.55);
            transform: scale(0.6) rotate(10deg) translateX(5px) translateZ(0);
            -webkit-transform: scale(0.6) rotate(10deg) translateX(5px) translateZ(0);
            animation: petalBreath var(--petal-breath-duration) ease-in-out infinite alternate;
            -webkit-animation: petalBreath var(--petal-breath-duration) ease-in-out infinite alternate;
            animation-play-state: paused;
            -webkit-animation-play-state: paused;
            will-change: transform, opacity;
        }
        
        @-webkit-keyframes petalBreath {
            from {
                -webkit-transform: scale(1.05) translateZ(0);
                transform: scale(1.05) translateZ(0);
            }
            to {
                -webkit-transform: scale(1.1) translateZ(0);
                transform: scale(1.1) translateZ(0);
            }
        }
        
        @keyframes petalBreath {
            from {
                transform: scale(1.05) translateZ(0);
            }
            to {
                transform: scale(1.1) translateZ(0);
            }
        }
        
        #text {
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
        }
        
        .typing-effect {
            overflow: hidden;
            white-space: nowrap;
            border-right: .1em solid #eee;
            -webkit-animation: typing var(--text-animation-duration) steps(30, end) forwards, 
                              blink-caret .75s step-end infinite;
            animation: typing var(--text-animation-duration) steps(30, end) forwards, 
                     blink-caret .75s step-end infinite;
        }
        
        .typing-suspense {
            overflow: hidden;
            white-space: nowrap;
            border-right: .1em solid #eee;
            -webkit-animation: typing var(--text-suspense-duration) steps(3, end) forwards, 
                              blink-caret .5s step-end infinite;
            animation: typing var(--text-suspense-duration) steps(3, end) forwards, 
                     blink-caret .5s step-end infinite;
        }
        
        @-webkit-keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @-webkit-keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #eee; }
        }
        
        .dust-particle {
            position: fixed;
            width: 1px;
            height: 1px;
            border-radius: 50%;
            background: radial-gradient(circle at center, rgba(255,255,255,0.8), rgba(255,255,255,0.2));
            opacity: 0;
            z-index: -2;
            pointer-events: none;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            will-change: transform, opacity;
        }
        
        @-webkit-keyframes rise {
            0% {
                -webkit-transform: translateY(100vh) translateZ(0);
                transform: translateY(100vh) translateZ(0);
                opacity: 0;
            }
            20% { opacity: 1; }
            80% { opacity: 0.8; }
            100% {
                -webkit-transform: translateY(-20vh) translateZ(0);
                transform: translateY(-20vh) translateZ(0);
                opacity: 0;
            }
        }
        
        .butterfly {
            position: absolute;
            width: 40px;
            height: 40px;
            -webkit-filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
            filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
            opacity: 0;
            pointer-events: none;
            z-index: -1;
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            will-change: transform, opacity;
        }
        
        .butterfly svg {
            -webkit-animation: wing-flutter 0.8s infinite ease-in-out;
            animation: wing-flutter 0.8s infinite ease-in-out;
        }
        
        @-webkit-keyframes wing-flutter {
            0%, 100% { -webkit-transform: scaleX(1); transform: scaleX(1); }
            50% { -webkit-transform: scaleX(0.85); transform: scaleX(0.85); }
        }
        
        @-webkit-keyframes flyUp {
            0% {
                -webkit-transform: translateY(100vh) translateX(0) scale(1) translateZ(0);
                transform: translateY(100vh) translateX(0) scale(1) translateZ(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            25% {
                -webkit-transform: translateY(75vh) translateX(20px) translateZ(0);
                transform: translateY(75vh) translateX(20px) translateZ(0);
            }
            50% {
                -webkit-transform: translateY(50vh) translateX(-20px) translateZ(0);
                transform: translateY(50vh) translateX(-20px) translateZ(0);
            }
            75% {
                -webkit-transform: translateY(25vh) translateX(20px) translateZ(0);
                transform: translateY(25vh) translateX(20px) translateZ(0);
            }
            90% {
                opacity: 1;
            }
            100% {
                -webkit-transform: translateY(-20vh) translateX(0) translateZ(0);
                transform: translateY(-20vh) translateX(0) translateZ(0);
                opacity: 0;
            }
        }
        
        #glass-bell-container {
            -webkit-transform: translate(-50%, -150%) scale(0.8);
            transform: translate(-50%, -150%) scale(0.8);
            -webkit-transition: -webkit-transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 1s ease-out;
            transition: transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 1s ease-out;
            will-change: transform, opacity;
            z-index: 3;
        }
        
        #glass-bell-container.visible {
            -webkit-transform: translate(-50%, 0%) scale(1);
            transform: translate(-50%, 0%) scale(1);
        }
        
        .bell-glass {
            fill: url(#glassGradient);
            stroke: rgba(220, 220, 255, 0.3);
            stroke-width: 1.5px;
            -webkit-filter: url(#glassShine);
            filter: url(#glassShine);
        }
        
        #filter-region {
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
        }
    </style>
</head>
<body>

    <div id="sky">
         <div class="shooting-star"></div>
    </div>

    <div id="text-container">
        <span id="text-wrapper"><span id="text"></span></span>
    </div>

    <div id="dust-container"></div>
    
    <div id="butterflies-container"></div>

    <div id="rose-container">
        <svg id="rose-svg" viewBox="0 0 60 150" preserveAspectRatio="xMidYMax meet">
             <defs>
                 <linearGradient id="leafGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stop-color="var(--green-light)" />
                    <stop offset="50%" stop-color="var(--green-mid)" />
                    <stop offset="100%" stop-color="var(--green-dark)" />
                 </linearGradient>
                 <linearGradient id="stemGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" stop-color="var(--green-dark)" />
                    <stop offset="50%" stop-color="var(--green-mid)" />
                    <stop offset="100%" stop-color="var(--green-light)" />
                 </linearGradient>
                 <linearGradient id="petalFill" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stop-color="#ffffff"/>
                    <stop offset="100%" stop-color="#e8e8e8"/>
                 </linearGradient>
                 <filter id="petalGlow" x="-50%" y="-50%" width="200%" height="200%">
                    <feGaussianBlur stdDeviation="3" result="coloredBlur" flood-color="var(--petal-glow-color)" flood-opacity="1"></feGaussianBlur>
                     <feMerge>
                         <feMergeNode in="coloredBlur"/>
                         <feMergeNode in="SourceGraphic"/>
                     </feMerge>
                 </filter>
             </defs>
             
            <g>
                <path class="leaf leaf1" d="M30 120 Q 15 118 5 125 T 28 130 Z" transform="rotate(-20 30 120)"/>
                <path class="leaf leaf2" d="M30 120 Q 45 118 55 125 T 32 130 Z" transform="rotate(20 30 120)"/>
                <path class="leaf leaf3" d="M28 85 Q 10 83 0 90 T 25 95 Z" transform="rotate(-25 28 85)"/>
                <path class="leaf leaf4" d="M28 85 Q 46 83 56 90 T 31 95 Z" transform="rotate(25 28 85)"/>
                <path class="leaf leaf5" d="M27 60 Q 10 58 5 65 T 24 70 Z" transform="rotate(-30 27 60)"/>
                <path class="leaf leaf6" d="M27 60 Q 44 58 49 65 T 30 70 Z" transform="rotate(30 27 60)"/>
            </g>
            
            <path class="stem-path" id="stem" d="M30 200 C 30 160, 25 90, 30 35" />
            
            <g>
                <path class="petal petal5" d="M30 35 C 15 20, 5 5, 30 0 C 55 5, 45 20, 30 35 Z"/>
                <path class="petal petal4" d="M30 33 C 5 20, -10 10, 30 0 C 70 10, 55 20, 30 33 Z" transform="rotate(-45 30 10)"/>
                <path class="petal petal3" d="M3033 C 5 20, -10 10, 30 0 C 70 10, 55 20, 30 33 Z" transform="rotate(45 30 10)"/>
                <path class="petal petal2" d="M30 31 C 0 15, -15 5, 30 0 C 75 5, 60 15, 30 31 Z" transform="rotate(-90 30 10)"/>
                <path class="petal petal1" d="M30 31 C 0 15, -15 5, 30 0 C 75 5, 60 15, 30 31 Z" transform="rotate(90 30 10)"/>
                <path class="petal petal6" d="M30 32 C 5 18, -5 8, 30 0 C 65 8, 55 18, 30 32 Z" transform="rotate(-135 30 10)"/>
                <path class="petal petal7" d="M30 32 C 5 18, -5 8, 30 0 C 65 8, 55 18, 30 32 Z" transform="rotate(135 30 10)"/>
            </g>
        </svg>

        <svg class="tall-grass left" viewBox="0 0 100 300" preserveAspectRatio="none">
            <defs>
                <linearGradient id="grassGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" stop-color="var(--green-dark)" />
                    <stop offset="50%" stop-color="var(--green-mid)" />
                    <stop offset="100%" stop-color="var(--green-light)" />
                </linearGradient>
            </defs>
            <path class="grass-blade" d="M 10 300 C 10 250, 20 200, 15 150" />
            <path class="grass-blade" d="M 30 300 C 30 240, 40 180, 35 120" />
            <path class="grass-blade" d="M 50 300 C 50 230, 60 160, 55 90" />
            <path class="grass-blade" d="M 70 300 C 70 220, 80 140, 75 60" />
            <path class="grass-blade" d="M 90 300 C 90 210, 100 120, 95 30" />
        </svg>

        <svg class="tall-grass right" viewBox="0 0 100 300" preserveAspectRatio="none">
            <defs>
                <linearGradient id="grassGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                    <stop offset="0%" stop-color="var(--green-dark)" />
                    <stop offset="50%" stop-color="var(--green-mid)" />
                    <stop offset="100%" stop-color="var(--green-light)" />
                </linearGradient>
            </defs>
            <path class="grass-blade" d="M 10 300 C 10 250, 20 200, 15 150" />
            <path class="grass-blade" d="M 30 300 C 30 240, 40 180, 35 120" />
            <path class="grass-blade" d="M 50 300 C 50 230, 60 160, 55 90" />
            <path class="grass-blade" d="M 70 300 C 70 220, 80 140, 75 60" />
            <path class="grass-blade" d="M 90 300 C 90 210, 100 120, 95 30" />
        </svg>

        <div id="glass-bell-container">
            <svg id="glass-bell-svg" viewBox="0 0 100 120" preserveAspectRatio="xMidYMid meet">
                <defs>
                    <radialGradient id="glassGradient" cx="50%" cy="50%" r="100%" fx="50%" fy="50%">
                        <stop offset="0%" stop-color="rgba(255, 255, 255, 0.15)" />
                        <stop offset="50%" stop-color="rgba(255, 255, 255, 0.08)" />
                        <stop offset="100%" stop-color="rgba(200, 200, 220, 0.2)" />
                    </radialGradient>
                    <filter id="glassShine" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur"/>
                        <feOffset in="blur" dx="1" dy="-2" result="offsetBlur"/>
                        <feSpecularLighting in="offsetBlur" surfaceScale="6" specularConstant=".8" specularExponent="25" lighting-color="#ddeeff" result="specOut">
                            <fePointLight x="-5000" y="-10000" z="20000"/>
                        </feSpecularLighting>
                        <feComposite in="specOut" in2="SourceAlpha" operator="in" result="specOut"/>
                        <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" k1="0" k2="1" k3="1" k4="0" result="litPaint"/>
                        <feMerge>
                            <feMergeNode in="litPaint"/>
                            <feMergeNode in="SourceGraphic"/>
                        </feMerge>
                    </filter>
                </defs>
                <path class="bell-glass" d="M 5 40 C 20 10, 80 10, 95 40 L 95 240 C 80 270, 20 270, 5 240 Z" />
            </svg>
        </div>
    </div>

    <div id="moon-reveal">
         <div class="moon-container">
             <div class="moon-glow"></div>
             <div class="photo-placeholder photo-left"></div>
             <div class="photo-placeholder photo-right"></div>
             <div id="wish-text"></div>
             <svg class="moon-svg" viewBox="0 0 300 300" preserveAspectRatio="xMidYMid meet">
                 <defs>
                    <radialGradient id="moonTexture"> <stop offset="0%" stop-color="#ffffff"/> <stop offset="50%" stop-color="#f4f4f4"/> <stop offset="85%" stop-color="#e1e1e1"/> <stop offset="100%" stop-color="#d4d4d4"/> </radialGradient>
                    <radialGradient id="craterTexture"> <stop offset="0%" stop-color="#d4d4d4"/> <stop offset="100%" stop-color="#a0a0a0"/> </radialGradient>
                    <filter id="noise" x="-50%" y="-50%" width="200%" height="200%"> <feTurbulence type="fractalNoise" baseFrequency="0.7" numOctaves="5" seed="5"/> <feColorMatrix type="saturate" values="0"/> <feComponentTransfer> <feFuncA type="linear" slope="0.08"/> </feComponentTransfer> <feComposite operator="in" in2="SourceGraphic"/> </filter>
                    <filter id="crater-shadow" x="-50%" y="-50%" width="200%" height="200%"> <feGaussianBlur in="SourceAlpha" stdDeviation="1"/> <feOffset dx="1" dy="1" result="offsetBlur"/> <feComponentTransfer in="offsetBlur" result="alphaTransfer"> <feFuncA type="linear" slope="0.4"/> </feComponentTransfer> <feMerge> <feMergeNode in="alphaTransfer"/> <feMergeNode in="SourceGraphic"/> </feMerge> </filter>
                </defs>
                <circle cx="150" cy="150" r="120" fill="url(#moonTexture)"/> <circle cx="150" cy="150" r="120" fill="url(#moonTexture)" filter="url(#noise)"/>
                 <g filter="url(#crater-shadow)"> <ellipse cx="150" cy="220" rx="28" ry="25" fill="url(#craterTexture)" transform="rotate(-5 150 220)"/> <ellipse cx="145" cy="150" rx="22" ry="20" fill="url(#craterTexture)" transform="rotate(10 145 150)"/> <ellipse cx="95" cy="145" rx="15" ry="13" fill="url(#craterTexture)" transform="rotate(-8 95 145)"/> <ellipse cx="150" cy="80" rx="20" ry="15" fill="url(#craterTexture)" transform="rotate(0 150 80)"/> <ellipse cx="190" cy="200" rx="25" ry="18" fill="url(#craterTexture)" transform="rotate(15 190 200)"/> </g>
                <g filter="url(#crater-shadow)" opacity="0.7"> <circle cx="85" cy="120" r="8" fill="url(#craterTexture)"/> <circle cx="145" cy="125" r="6" fill="url(#craterTexture)"/> <circle cx="160" cy="175" r="7" fill="url(#craterTexture)"/> <circle cx="200" cy="140" r="5" fill="url(#craterTexture)"/> <circle cx="210" cy="170" r="9" fill="url(#craterTexture)"/> <circle cx="220" cy="150" r="6" fill="url(#craterTexture)"/> <circle cx="70" cy="160" r="7" fill="url(#craterTexture)"/> </g>
                 
                 <image id="moon-image" x="125" y="220" width="50" height="50" xlink:href="" style="display: none;"/>
             </svg>
             <div id="wish-text"></div>
         </div>
    </div>

    <script>
        const roseContainer = document.getElementById('rose-container');
        const roseSvg = document.getElementById('rose-svg');
        const textContainer = document.getElementById('text-container');
        const textElement = document.getElementById('text');
        const glassBellContainer = document.getElementById('glass-bell-container');
        const sky = document.getElementById('sky');
        const wishText = document.getElementById('wish-text');
        const moonReveal = document.getElementById('moon-reveal');
        const shootingStar = document.querySelector('.shooting-star');
        const tallGrasses = document.querySelectorAll('.tall-grass');
        const container = document.querySelector('body');
        
        let butterflyInterval;
        
        function createDustParticles() {
            for (let i = 0; i < 150; i++) {
                const particle = document.createElement('div');
                particle.className = 'dust-particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.width = `${Math.random() * 3 + 1}px`;
                particle.style.height = particle.style.width;
                particle.style.animation = `rise ${5 + Math.random() * 3}s ease-out infinite ${Math.random() * 4}s`;
                container.appendChild(particle);
            }
        }
        
        function createInitialButterflies() {
            for (let i = 0; i < 5; i++) {
                createButterfly(i * 20 + Math.random() * 15, i * 500);
            }
        }
        
        function createButterfly(xPos, delay) {
            const butterfly = document.createElement('div');
            butterfly.className = 'butterfly';
            butterfly.innerHTML = `
                <svg viewBox="0 0 100 100">
                    <path d="M48 40 L52 40 L52 60 L48 60 Z" fill="white"/>
                    <path d="M48 40 Q45 30 42 25 M52 40 Q55 30 58 25" stroke="white" stroke-width="1" fill="none"/>
                    <path d="M48 40 C20 20, 10 30, 20 45 C10 60, 20 65, 48 50" fill="white" opacity="0.9"/>
                    <path d="M52 40 C80 20, 90 30, 80 45 C90 60, 80 65, 52 50" fill="white" opacity="0.9"/>
                    <path d="M48 50 C20 45, 10 55, 20 65 C10 75, 30 75, 48 60" fill="white" opacity="0.8"/>
                    <path d="M52 50 C80 45, 90 55, 80 65 C90 75, 70 75, 52 60" fill="white" opacity="0.8"/>
                </svg>
            `;
            butterfly.style.left = `${xPos}%`;
            
            setTimeout(() => {
                container.appendChild(butterfly);
                butterfly.classList.add('animated');
                
                setTimeout(() => butterfly.remove(), 8000);
            }, delay);
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            createDustParticles();
            createInitialButterflies();
            
            butterflyInterval = setInterval(() => {
                createButterfly(Math.random() * 80 + 10, 0);
            }, 5000);
        });

        const messages = [
            "Do you love me ?", "A bit ?", "A lot ?", "Passionately ?", "Madly ?",
            "Not at all ?", "No matter what ?", "To the wood and snack ?",
            "To the picnic and back ?", "To the kisses and cuddles ?",
            "To the Moon and back ?", "Forever after the end ?" 
        ];
        let messageIndex = -1;
        let bellAppeared = false;
        let skyAppeared = false;
        let moonRevealed = false;
        let roseReady = false;
        let textAnimationTimeout = null;

        // --- Text Animation Function ---
        function animateText(element, text, effect = 'typing', durationVar = '--text-animation-duration', steps = 30) {
            clearTimeout(textAnimationTimeout);
            element.textContent = text; element.className = ''; void element.offsetWidth;
            let duration;
             if (effect === 'typing-suspense') {
                 duration = parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--text-suspense-duration'));
                 element.classList.add('typing-suspense');
             } else if (effect === 'typing' && text.length < 50) {
                duration = Math.min(Math.max(text.length * 0.06, 0.8), 2.0); 
                element.style.setProperty(durationVar, duration + 's');
                element.classList.add('typing-effect');
            } else {
                duration = 1;
                element.style.setProperty(durationVar, duration + 's');
                element.classList.add('fade-in-effect'); element.style.borderRight = 'none';
            }
             return duration * 1000;
        }

        function startRoseArrival() {
            roseContainer.classList.add('preparing');
            
            setTimeout(() => {
                roseContainer.classList.add('growing');
                
                setTimeout(() => {
                    roseContainer.classList.add('blooming');
                    
                    setTimeout(() => {
                        roseReady = true;
                        roseContainer.classList.add('ready'); 
                        
                        textContainer.classList.add('visible');
                        animateText(textElement, "...", 'typing-suspense');
                    }, parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--rose-bloom-duration')) * 1000); 
                    
                }, parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--rose-grow-duration')) * 1000);
                
            }, 50); 
        }

        setTimeout(startRoseArrival, 50); 
        function createStars(count = 150) {
             sky.querySelectorAll('.star').forEach(star => star.remove());
             for (let i = 0; i < count; i++) { 
                 const star = document.createElement('div'); 
                 star.classList.add('star'); 
                 const size = Math.random() * 2.5 + 1; 
                 star.style.width = size + 'px'; 
                 star.style.height = size + 'px'; 
                 star.style.top = Math.random() * 100 + '%'; 
                 star.style.left = Math.random() * 100 + '%'; 
                 star.style.animationDelay = Math.random() * 3 + 's'; 
                 star.style.animationDuration = (Math.random() * 1.5 + 1.5) + 's'; 
                 sky.appendChild(star); 
             }
         }
         
        function launchShootingStar() {
             shootingStar.style.animation = 'none'; 
             void shootingStar.offsetWidth; 
             const startX = Math.random() * 30 + 5; 
             const startY = Math.random() * 20 + 5; 
             const endX = Math.random() * 30 + 65; 
             const endY = Math.random() * 40 + 50; 
             const angle = Math.atan2(endY - startY, endX - startX) * (180 / Math.PI) + 15; 
             shootingStar.style.setProperty('--angle', angle + 'deg'); 
             shootingStar.style.animation = `shoot var(--shooting-star-duration) ${Math.random() * 2 + 1}s linear infinite`;
        }
        
        function hideElementsForTransition() {
            textContainer.classList.add('hide');
            roseContainer.classList.add('hide');
            glassBellContainer.classList.add('hide');
            
            tallGrasses.forEach(grass => grass.classList.add('hide'));
            
            const butterflies = document.querySelectorAll('.butterfly');
            butterflies.forEach(butterfly => {
                butterfly.style.opacity = '0';
                butterfly.style.transition = 'opacity 0.8s ease-out';
                setTimeout(() => butterfly.remove(), 800);
            });
            
            const dustParticles = document.querySelectorAll('.dust-particle');
            dustParticles.forEach(particle => {
                particle.style.opacity = '0';
                particle.style.transition = 'opacity 0.8s ease-out';
            });
            
            setTimeout(() => {
                animateText(wishText, "I wish to be with you on this wonderful day of your 19th birthday, forever and for all April 30th", 'fade-in');
                
                setTimeout(() => {
                    moonReveal.classList.add('open');
                    moonRevealed = true;
                }, 1800);
            }, 1000);
        }

        function createRipple(event) {
             if (!roseReady) return;
             const ripple = document.createElement('div'); 
             ripple.classList.add('ripple');
             const rect = roseContainer.getBoundingClientRect();
             
             const x = event.clientX - rect.left; 
             const y = event.clientY - rect.top;
             
             if (y < rect.height * 0.4) { 
                 ripple.style.left = x + 'px'; 
                 ripple.style.top = y + 'px';
                 roseContainer.appendChild(ripple);
                 setTimeout(() => { ripple.remove(); }, 600); 
             }
        }

        roseContainer.addEventListener('click', (event) => {
            if (!roseReady) return;

            clearTimeout(textAnimationTimeout); 
            createRipple(event);

            if (!bellAppeared) {
                 messageIndex++; 

                 if (messageIndex < messages.length) {
                    let suspenseDuration = animateText(textElement, "...", 'typing-suspense');

                    textAnimationTimeout = setTimeout(() => {
                        animateText(textElement, messages[messageIndex], 'typing');

                        if (messageIndex === messages.length - 1) {
                             bellAppeared = true; 
                             setTimeout(() => {
                                 glassBellContainer.classList.add('visible');
                                 animateText(textElement, "An eternal rose like our love", 'fade-in');
                             }, 500); 
                        }
                    }, suspenseDuration + 50);
                 }

            } else if (!skyAppeared) {
                 if (butterflyInterval) {
                     clearInterval(butterflyInterval);
                     butterflyInterval = null;
                 }

                 const butterflies = document.querySelectorAll('.butterfly');
                 butterflies.forEach(butterfly => butterfly.remove());
                 
                 const dustParticles = document.querySelectorAll('.dust-particle');
                 dustParticles.forEach(particle => particle.remove());
                 
                 sky.classList.add('visible');
                 createStars();
                 launchShootingStar();
                 skyAppeared = true; 
                 
                 setTimeout(() => {
                     hideElementsForTransition();
                 }, 1000); 
            }
        });

        function setMoonImage(imageUrl) {
            const moonImage = document.getElementById('moon-image');
            if (moonImage && imageUrl) {
                moonImage.setAttribute('xlink:href', imageUrl);
                moonImage.style.display = 'block';
            }
        }
        
        function setLunarPhotos(leftPhotoUrl, rightPhotoUrl) {
            const photoLeft = document.querySelector('.photo-left');
            const photoRight = document.querySelector('.photo-right');
            
            if (photoLeft && leftPhotoUrl) {
                photoLeft.style.backgroundImage = `url('${leftPhotoUrl}')`;
                photoLeft.style.backgroundSize = 'cover';
                photoLeft.style.backgroundPosition = 'center';
                photoLeft.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.5)';
            }
            
            if (photoRight && rightPhotoUrl) {
                photoRight.style.backgroundImage = `url('${rightPhotoUrl}')`;
                photoRight.style.backgroundSize = 'cover';
                photoRight.style.backgroundPosition = 'center';
                photoRight.style.boxShadow = '0 0 10px rgba(255, 255, 255, 0.5)';
            }
        }

        function setupMoonClickRedirect(targetUrl) {
            const moonContainer = document.querySelector('.moon-container');
            
            moonContainer.addEventListener('click', () => {
                if (moonRevealed) { 
                    window.location.href = targetUrl;
                }
            });
        }
            setLunarPhotos('img/bd/cat.jpg', 'img/bd/us.png');
            setupMoonClickRedirect('loading.html?destination=histÃ³rie.html');

    </script>

</body>
</html>
